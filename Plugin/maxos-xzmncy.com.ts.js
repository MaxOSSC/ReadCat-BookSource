plugin.exports=class t{static ID="FeY7BVuCE_rFKdrE0cenj";static TYPE=plugin.type.BOOK_SOURCE;static GROUP="MaxOS";static NAME="笔趣阁";static VERSION="1.0.0";static VERSION_CODE=0;static PLUGIN_FILE_URL="https://raw.kkgithub.com/MaxOSSC/ReadCat-BookSource/main/Plugin/maxos-xzmncy.com.ts.js";static BASE_URL="https://www.xzmncy.com";static REQUIRE={};request;store;cheerio;nanoid;constructor(t){var{request:t,store:e,cheerio:i,nanoid:r}=t;this.request=t,this.store=e,this.cheerio=i,this.nanoid=r}async search(e){if(e=(await this.request.get(t.BASE_URL+"/api/search?q="+e)).body,e=JSON.parse(e).data.search,isUndefined(e)||!isArray(e))return[];var i,r=[];for(i of e)r.push({bookname:i.book_name,author:i.author,coverImageUrl:t.BASE_URL+i.cover,detailPageUrl:t.BASE_URL+i.book_list_url,latestChapterTitle:i.latest_chapter_name});return r}async getDetail(e){e=(await this.request.get(e)).body;var i,r=this.cheerio(e),a=(e=r("#info > div.info > div.infobar > h1").text(),r("#info > div.info > div.infobar > p:nth-child(2)").text().substring(5)),o=r("#info > div.info > div.infobar > p:nth-child(6) > a").text(),s=r("#info > div.sidebar > div > img").attr("src"),n=r("#info > div.info > div.intro > p").text(),c=[];for(i of r("#list > dl > dd")){var h=r(i).children("a");c.push({title:h.text(),url:t.BASE_URL+h.attr("href")})}return{bookname:e,author:a,latestChapterTitle:o,coverImageUrl:s,intro:n,chapterList:c}}async getTextContent(t){return t=(await this.request.get(t.url)).body,this.cheerio(t)("#htmlContent").html().split("<br>").filter((t=>t.trim()))}};